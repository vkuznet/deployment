# vim: set ft=sh sw=2 ts=8 et :
deploy_dcafpilot_deps()
{
  deploy backend
  deploy wmcore-auth
  deploy mongodb
  deploy admin
}

deploy_dcafpilot_prep()
{
  mkproj stagingarea
  mkproxy
}

deploy_dcafpilot_sw()
{
  deploy_pkg comp cms+DCAFPilot 0.0.42
  perl -p -i -e "s|{ROOT}|$root|" $project_config/setup.sh
}

deploy_dcafpilot_post()
{
  (mkcrontab
   echo "50 20 * * 5 source $project_config/setup.sh && $DCAFPILOT_ROOT/bin/cron4dataframe.sh $project_config/dcaf.cfg /data/analytics /data/analytics/data/train > /data/analytics/cron4dataframe.log 2>&1"
   echo "15 18 * * * source $project_config/setup.sh && $DCAFPILOT_ROOT/bin/cron4models.sh /data/analytics /data/analytics/data/train > /data/analytics/cron4models.log 2>&1"
   echo "10 3 * * * source $project_config/setup.sh && $DCAFPILOT_ROOT/bin/cron4verify.sh /data/analytics/data/predictions > /data/analytics/cron4verify.log 2>&1"
  ) | crontab -
}
